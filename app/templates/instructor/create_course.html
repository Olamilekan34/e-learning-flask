{% extends "base.html" %}
{% block content %}

<div class="page-header-main">
    <div class="page-header" id="top">
        <div class="header-overlay">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-10 text-center d-flex align-items-center justify-content-center flex-column">
                        <h1 class="display-3 text-white animated slideInDown font-weight-bold">Create Course</h1>
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb justify-content-center">
                                <li class="breadcrumb-item"><a class="text-white" href="{{ url_for('main_bp.home') }}">Home</a></li>
                                <li class="breadcrumb-item"><a class="text-white" href="{{ url_for('main_bp.my_courses') }}">Courses</a></li>
                                <li class="breadcrumb-item text-white active" aria-current="page">New Course</li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="contact-us section" id="contact">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 align-self-center guide">
                <div class="section-heading">
                    <h6>Course Management</h6>
                    <h2>Create and Manage Your Courses</h2>
                    <p>Welcome to your course panel. Here, you can add new courses by filling in the form with the appropriate details, including course title, unit, session, and more.</p>
                    
                    <ul class="guidelines">
                        <li><i class="fa fa-check-circle"></i> Ensure the <strong>Course Code</strong> is unique and matches your curriculum.</li>
                        <li><i class="fa fa-check-circle"></i> Use a clear and descriptive <strong>Course Title</strong>.</li>
                        <li><i class="fa fa-check-circle"></i> Assign the correct <strong>Unit, Level, Session</strong>, and <strong>Semester</strong>.</li>
                        <li><i class="fa fa-check-circle"></i> Provide a brief but informative <strong>Description</strong> to help students understand the course focus.</li>
                        <li><i class="fa fa-check-circle"></i> Optionally upload an <strong>image</strong> to represent the course visually.</li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-6">
            <div class="contact-us-content">
                <form method="POST" id="contact-form" enctype="multipart/form-data" action="{{ url_for('main_bp.create_course') }}">
                    {{ form.hidden_tag() }}
                    <div class="row">
                        <div class="col-lg-12">
                            <fieldset>
                                <input type="text" name="code" id="code" placeholder="Course Code..." required="">
                            </fieldset>
                            {% if form.code.errors %}
                                <div class="text-danger">
                                {% for error in form.code.errors %}
                                    <span>{{ error }}</span>
                                {% endfor %}
                                </div>
                            {% endif %}
                        </div>
                        <div class="col-lg-12">
                            <fieldset>
                                <input type="text" name="title" id="title" placeholder="Course Title..." required="">
                            </fieldset>
                            {% if form.title.errors %}
                                <div class="text-danger">
                                {% for error in form.title.errors %}
                                    <span>{{ error }}</span>
                                {% endfor %}
                                </div>
                            {% endif %}
                        </div>
                        <div class="col-lg-6">
                            <fieldset>
                                <select name="unit" id="unit" required="" class="pr-2">
                                    <option value="" disabled selected>Select Unit</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                </select>
                            </fieldset>
                            {% if form.unit.errors %}
                                <div class="text-danger">
                                {% for error in form.unit.errors %}
                                    <span>{{ error }}</span>
                                {% endfor %}
                                </div>
                            {% endif %}
                        </div>
                        <div class="col-lg-6">
                            <fieldset>
                                <input type="session" name="session" id="session" placeholder="Session..." required="">
                            </fieldset>
                            {% if form.session.errors %}
                                <div class="text-danger">
                                {% for error in form.session.errors %}
                                    <span>{{ error }}</span>
                                {% endfor %}
                                </div>
                            {% endif %}
                        </div>
                        <div class="col-lg-6">
                            <fieldset>
                                <select name="semester" id="semester" required="" class="pr-2">
                                    <option value="" disabled selected>Select Semester</option>
                                    <option value="First">First Semester</option>
                                    <option value="Second">Second Semester</option>
                                </select>
                            </fieldset>
                            {% if form.semester.errors %}
                                <div class="text-danger">
                                {% for error in form.semester.errors %}
                                    <span>{{ error }}</span>
                                {% endfor %}
                                </div>
                            {% endif %}
                        </div>
                        <div class="col-lg-6">
                            <fieldset>
                                <select name="level" id="level" required="" class="pr-2">
                                    <option value="" disabled selected>Select Level</option>
                                    <option value="100">100L</option>
                                    <option value="200">200L</option>
                                    <option value="300">300L</option>
                                    <option value="400">400L</option>
                                    <option value="500">500L</option>
                                </select>
                            </fieldset>
                            {% if form.level.errors %}
                                <div class="text-danger">
                                {% for error in form.level.errors %}
                                    <span>{{ error }}</span>
                                {% endfor %}
                                </div>
                            {% endif %}
                        </div>
                        <div class="col-8">
                            <div class="col-lg-12">
                                <fieldset>
                                    <textarea row="4" name="description" id="description" placeholder="Course Description..." required="">
                                    </textarea>
                                </fieldset>
                                {% if form.unit.errors %}
                                    <div class="text-danger">
                                    {% for error in form.unit.errors %}
                                        <span>{{ error }}</span>
                                    {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-4 wow fadeInUp" data-wow-delay="0.1s">
                            <div class="p-1 bg-light rounded">
                                <!-- Image Upload -->
                                <div class="bg-white rounded p-1 mb-1 text-center">
                                    <div class="d-flex justify-content-center align-items-center" style="height: 100px; border: 2px dashed #ccc; border-radius: 10px; cursor: pointer;" onclick="document.getElementById('profile_picture').click();">
                                        <img id="profilePicturePreview" src="#" alt="Profile Picture" class="img-fluid rounded d-none" style="max-height: 100%; max-width: 100%;">
                                        <p id="profilePicturePlaceholder" class="text-muted">Click to upload Image</p>
                                    </div>
                                    <input type="file" name="image" id="profile_picture" class="form-control d-none" accept="image/*" onchange="previewImage(this, 'profilePicturePreview', 'profilePicturePlaceholder')">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <fieldset>
                                <button type="submit" id="form-submit" class="orange-button">Create</button>
                            </fieldset>
                        </div>

                    </div>
                </form>
            </div>
            </div>
        </div>
    </div>
</div>


<script>
    function previewImage(input, previewId, placeholderId) {
        const file = input.files[0];
        const preview = document.getElementById(previewId);
        const placeholder = document.getElementById(placeholderId);

        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                preview.src = e.target.result;
                preview.classList.remove('d-none'); // Show the image
                placeholder.classList.add('d-none'); // Hide the placeholder text
            };
            reader.readAsDataURL(file);
        } else {
            preview.src = '#';
            preview.classList.add('d-none'); // Hide the image
            placeholder.classList.remove('d-none'); // Show the placeholder text
        }
    }
</script>

{% endblock %}